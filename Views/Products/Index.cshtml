@model DutyFree.Models.AdminViewModel
@{
    ViewData["Title"] = "Produkty";
}

<section class="hero">
    <div class="container">
        <div class="vyhledavaci-lista">
            <h1 class="text-center">Na co máš chuť?</h1>
            <form method="get" action="@Url.Action("Index", "Products")">
                <div class="input-group mb-3 rounded-0">
                    <input type="text" name="search" class="form-control rounded-0" value="@ViewBag.Search"/>
                    <input class="btn rounded-0" type="submit" value="Vyhledat"/>
                </div>
            </form>
        </div>
    </div>
</section>

<section class="container-lg">
<div class="karticka">
        <div class="row row-cols-1 row-cols-md-3 row-cols-lg-4 g-4">
            @foreach(var product in Model.Products)
            {
                <div class="col">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title text-center">@product.Name</h5>
                            <p class="text-success text-left">Skladem @product.Quantity ks</p>
                            <hr>
                            <div class="row d-flex align-items-center justify-content-center">
                                <div class="col d-flex align-items-center justify-content-between flex-row">
                                    <p class="text-danger" style="margin: 0">@product.Price Kč</p>
                                    <a href="#" class="btn rounded-0 btn-purchase" data-product-id="@product.ProductId">Koupit</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }

            <div class="col">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title text-center">Test</h5>
                        <p class="text-success text-left">Skladem 1 ks</p>
                        <hr>
                        <div class="discount-circle">
                            <span class="discount-text">-58%</span>
                        </div>
                        <div class="new-badge">
                            <span class="new-text">NEW</span>
                        </div>
                        <div class="row d-flex align-items-center justify-content-center">
                            <div class="col d-flex align-items-center justify-content-between flex-row">
                                <p class="text-danger" style="margin: 0">25 Kč</p>
                                <a href="#" class="btn rounded-0 btn-purchase">Koupit</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $(".btn-purchase").click(function (e) {
            e.preventDefault();
            var productId = $(this).data("product-id");
            var data = {productId : productId}
            console.log(data);
            $.ajax({
                url: '@Url.Action("Buy", "Products")',
                type: 'POST',
                dataType: 'json',
                data: $.param(data),
                contentType: 'application/x-www-form-urlencoded',
                success: function (response) {
                    console.log("Success:", response);
                },
                error: function (error) {
                    console.log("Error:", error);
                }
            });
        });
    });
</script>


<style>
    ::selection {
        background-color: #FF4401;
        color: white;
    }

    .hero
    {
        background-image: url('https://media.discordapp.net/attachments/1107599847562952794/1107974604867244072/photo-login.png?width=1600&height=842'); 
        background-size: cover; 
        background-position: center; 
        border-bottom: 6px solid #FF4401;
        width: 100%; 
        height: 50vh;
        display: flex;
        align-items: center;
    }
    
    .vyhledavaci-lista
    {
        padding-top: 6%;
        }
    
    h1
    {
        color: white;
        }
    
    .btn
    {
        background-color: #FF4401;
        color: white;
        border-color: #FF4401;
    }
    .btn:hover
    {
        background-color: white;
        color: #FF4401;
        border-color: #FF4401;
    }  
            
    .karticka
    {
        padding-top: 5%;
        padding-left: 3%;
        padding-right: 3%;
        padding-bottom: 5%;
    }


    .discount-circle {
        position: absolute;
        top: 10px;
        right: 10px;
        width: 50px;
        height: 50px;
        background-color: yellow;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .discount-text {
        color: black;
        font-size: 15px;
        font-weight: bold;
    }

    .new-badge {
        position: absolute;
        top: 70px;
        right: 10px;
        width: 50px;
        height: 50px;
        background-color: #2475b0;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .new-text {
        color: white;
        font-size: 16px;
        font-weight: bold;
    }


</style>