@model DutyFree.Models.AdminViewModel

@{
    ViewData["Title"] = "Přihlášení";
}

<section class="hero">
    <h1 class="display-4 text-white text-center"><strong>Přihlaste se</strong></h1>
</section>

<div class="container">
    <div class="tabulka">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th scope="col">Název</th>
                    <th scope="col">Email</th>
                    <th scope="col">Role</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var user in Model.Users)
                {
                    <input type="hidden" class="userId" value="@user.UserId" />
                    <tr>
                        <td>@user.Name</td>
                        <td>@user.Email</td>
                        <td>@user.Role</td>
                        <td><button type="button" class="submitBtn btn btn-sm btn-primary rounded-0">Přihlásit se</button></td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $('.submitBtn').click(function () {
            var $row = $(this).closest('tbody');
            var userId = $row.find('.userId').val();
            var rowData = {
                'userId': userId
            };
            $.ajax({
                type: 'POST',
                url: '@Url.Action("Login", "Security")',
                data: $.param(rowData),
                contentType: 'application/x-www-form-urlencoded',
                success: function (response) {
                    console.log(response);
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        });
    });
</script>

<style>
    ::selection {
        background-color: #FF4401;
        color: white;
    }

    .tabulka {
        padding-top: 5%;
    }

    .hero {
        background-image: url('https://media.discordapp.net/attachments/1107599847562952794/1107974604867244072/photo-login.png?width=1600&height=842');
        background-size: cover;
        background-position: center;
        border-bottom: 6px solid #FF4401;
        width: 100%;
        height: 30vh;
    }

    h1 {
        color: white;
        padding-top: 7%;
    }

    .btn {
        background-color: #FF4401;
        color: white;
        width: 125px;
        border-color: #FF4401;
    }

        .btn:hover {
            background-color: white;
            color: #FF4401;
            border-color: #FF4401;
        }
</style>
